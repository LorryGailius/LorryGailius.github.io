---
import { Icon } from "astro-icon/components";
import NavCard from "./Card/NavCard.astro";

const btnStyle =
  "py-4 px-6 sm:py-[8px] sm:px-4 text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white";

const active = "font-medium !text-black dark:!text-white";

interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;
---

<div>
  <button id="sandwich" class="flex justify-center align-middle">
    <Icon name="ri:menu-fill" class="w-6 h-6" />
  </button>
  <div id="flyout" class="z-20 absolute left-0">
    <NavCard>
      <div class="flex flex-col my-2 mr-10">
        <a class={`${btnStyle} ${currentPath === "" ? active : ""}`} href="/"
          >Home</a
        >
        <a
          class={`${btnStyle} ${currentPath === "about" ? active : ""}`}
          href="/about">About</a
        >
        <a
          class={`${btnStyle} ${currentPath === "work" ? active : ""}`}
          href="/work">Work</a
        >
        <a
          class={`${btnStyle} ${currentPath === "contact" ? active : ""}`}
          href="/contact">Contact</a
        >
      </div>
    </NavCard>
  </div>
</div>

<script is:inline>
  const sandwich = document.getElementById("sandwich");
  const navCard = document.getElementById("flyout");
  let isVisible = false;

  const toggleNavCard = () => {
    isVisible = !isVisible;
    navCard.style.display = isVisible ? "block" : "none";
  };

  navCard.style.display = "none";
  sandwich.addEventListener("click", toggleNavCard);
</script>
